% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/multiple_raters.R
\name{many_raters}
\alias{many_raters}
\title{Create a wide rater–indicator table across many RESQUE applicants}
\usage{
many_raters(path, selector = c("P_"), verbose = TRUE, ...)
}
\arguments{
\item{path}{Character scalar. Directory containing RESQUE JSON files to be
passed to \code{\link{get_jsons}}.}

\item{selector}{Character vector. One or more prefixes identifying the
indicator columns to be extracted (e.g. \code{"P_"}). Passed to
\code{\link{extract_indicators}} and used in \code{\link[tidyr]{pivot_longer}}
via \code{\link[dplyr]{starts_with}}. Defaults to \code{c("P_")}.}

\item{verbose}{Logical scalar. If \code{TRUE}, the function prints summary
information about the number of files, papers, authors, and consistency
statistics. Defaults to \code{TRUE}.}

\item{...}{Additional arguments passed directly to \code{\link{get_jsons}},
such as \code{replace_form}, \code{recursive}, \code{get_OpenAlex},
\code{get_BIP}, \code{anonymize_raters}, and \code{verbose}.}
}
\value{
A data frame in wide format with one row per
(paper \eqn{\times} indicator) combination. The table contains, among
others, the following columns:
\itemize{
\item \code{ORCID}, \code{doi}, \code{Title}: publication and author
identifiers/metadata.
\item \code{Indicator}: the indicator name.
\item \code{R1}, \code{R2}, \code{R3}, \dots: one column per rater
containing the rating values, with missing
values converted to the character \code{"_NA_"}.
\item \code{is_consistent}: logical flag indicating whether all rater
ratings for this indicator are identical.
\item \code{scoring_relevant}: logical flag indicating whether the
indicator is part of the scoring specification in
\code{meta$forms$pub$scoring}.
\item \code{consensus_rating}: consensus rating (typically the value in
\code{R1}) for indicators where \code{is_consistent} is \code{TRUE},
otherwise \code{NA}.
}
}
\description{
Imports and preprocesses RESQUE JSON files from a directory via
\code{\link{get_jsons}}, extracts indicator ratings, reshapes them into a
wide format with one row per (paper \eqn{\times} indicator), and one column
for each rater. It computes consistency and scoring-relevance flags for each
indicator.
}
\details{
The function first calls \code{\link{get_jsons}} to obtain a list of
preprocessed applicants. It then uses \code{\link{extract_indicators}} to
build a long-format table of indicator ratings for each paper/rater, and
reshapes this into a wide table with one column per rater (\code{R1},
\code{R2}, \code{R3}, \dots).

An indicator is flagged as \emph{consistent} if all raters gave the same
rating. Indicators whose names
appear in the scoring specification in the meta-data are additionally flagged
as \emph{scoring relevant}. For consistent indicators, the consensus rating
is prepopulated.
}
\examples{
\dontrun{
  # Create a wide rater–indicator table from all RESQUE files in a directory
  wide <- many_raters(
    path     = "raw_data/Study2/calibration_papers",
    selector = c("P_"),
    replace_form     = "includes/v0.8.1forms.json",
    anonymize_raters = TRUE
  )

  # Inspect inconsistent, scoring-relevant indicators
  subset(wide, !is_consistent & scoring_relevant)
}
}
\seealso{
\code{\link{get_jsons}},
\code{\link{extract_indicators}}
}
